<!--User login form-->
<div class="error" id="error"></div>
<script>
	// This is called with the results from from FB.getLoginStatus().
	function statusChangeCallback(response) {
		if(response.status === 'connected') {
			FB.api('/me', function(res){
				document.getElementById('fblogincheck').innerHTML='Looged in as '+res.name+' on Facebook';
			});
		} else if(response.status === 'not_authorized'){}
		else {
			document.getElementById('fblogincheck').innerHTML='';
		}
	}

	// This function is called when someone finishes with the Login
	// Button.  See the onlogin handler attached to it in the sample
	// code below.
	function checkLoginState() {
		FB.getLoginStatus(function(response) {
			statusChangeCallback(response);
		});
	}
</script>
<form name="login_form" id="login_form" action="users/login" method="POST"
onsubmit="return validate_login(event);">
	<label>Email:</label> 
	<input type="text" name="email" size="30"><br/>

	<label>Password:</label>
	<input type="password" name="passwd" size="30"><br/>

	<!--Fill the href section with the appropriate request
	    to send to script-->
	<a href="/reset_password">Forgot your password?</a><br/>

	<input type="submit" name="submit_button" value="Login">
	
	<!--FB Login Button-->
	<fb:login-button scope="public_profile" onlogin="checkLoginState();" auto-logout-link="true">
	</fb:login-button>
	
	<div id="status">
	</div>
</form>
